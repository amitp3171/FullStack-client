:root{
  /* tokens */
  --surface: #ffffff;
  --surface-2:#f8fafc;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --shadow: 0 10px 30px rgba(2,6,23,.08);
  --ring: 0 0 0 2px rgba(59,130,246,.25);

  --panel-w:240px;   /* sidebar width */
  --handle-w:60px;   /* visible tab when closed */
}

/* dark theme support if you flip data-theme on <html> */
html[data-theme="dark"]{
  --surface:#0b1220;
  --surface-2:#101826;
  --text:#e5e7eb;
  --muted:#9aa4b2;
  --border:#1f2a37;
  --shadow: 0 10px 30px rgba(0,0,0,.45);
}

/* helpful default */
*,*::before,*::after{ box-sizing:border-box; }

/* Drawer */
.side-menu{
  position:fixed; top:0; left:0;
  width:var(--panel-w); height:100vh;
  background:var(--surface);
  color:var(--text);
  border-right:1px solid var(--border);
  box-shadow:2px 0 12px rgba(0,0,0,.12);
  padding:20px;
  padding-bottom:92px;                 /* room for footer chip */
  z-index:1000;

  /* keep a sliver visible when closed */
  transform:translateX(calc(-100% + var(--handle-w)));
  transition:transform .25s ease;
}
.side-menu.open{ transform:translateX(0); }

/* Handle (… tab) */
.menu-handle{
  position:absolute; top:12px; right:calc(var(--handle-w) * -1);
  width:var(--handle-w); height:40px;
  display:grid; place-items:center;
  background:var(--surface);
  color:var(--text);
  border:1px solid var(--border);
  border-left:none;
  border-radius:0 10px 10px 0;
  box-shadow:2px 0 8px rgba(0,0,0,.10);
  cursor:pointer; user-select:none;
  z-index:1100;
  font-size:20px;
  transition:background .15s ease, box-shadow .15s ease;
}
.menu-handle:hover{ background:var(--surface-2); box-shadow:2px 0 10px rgba(0,0,0,.14); }
.menu-handle:focus-visible{ outline:var(--ring); }

/* Backdrop when open (optional – toggle a .show class from JS if you want) */
.side-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.35);
  z-index:900; opacity:0; pointer-events:none; transition:opacity .2s ease;
}
.side-overlay.show{ opacity:1; pointer-events:auto; }

/* Menu items */
.side-menu ul{ list-style:none; margin:0; padding:0; }
.side-menu li{
  margin:18px 0;
  padding:10px 12px;
  border-radius:10px;
  font-size:15.5px;
  color:var(--text);
  cursor:pointer;
  transition:background .15s ease, color .15s ease;
}
.side-menu li:hover{ background:var(--surface-2); }

/* If you use <ul class="sm-list"> in JSX */
.sm-list{ list-style:none; margin:0; padding:0; }

/* ---------- User footer (click to open drop-up) ---------- */
.sm-user-footer{
  position:absolute !important; left:12px; right:12px; bottom:12px;
  display:flex; align-items:center; gap:10px;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:12px;
  background:var(--surface-2);
  cursor:pointer; z-index:1010;
  transition:background .15s ease, box-shadow .15s ease, border-color .15s ease;
  text-align:left;
}
.sm-user-footer:hover{ background:var(--surface); box-shadow:0 2px 10px rgba(0,0,0,.06); }
.sm-user-footer:focus-visible{ outline:var(--ring); }

.sm-user-avatar{
  width:34px; height:34px; border-radius:999px;
  display:grid; place-items:center; font-weight:700;
  background:rgba(148,163,184,.18); color:var(--text);
}

.sm-user-meta{ min-width:0; display:flex; flex-direction:column; }
.sm-user-name{
  font-size:.96rem; color:var(--text);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* caret arrow on the right of the footer */
.sm-caret{ margin-left:auto; opacity:.75; transition:transform .15s ease; }
.sm-caret.open{ transform:rotate(180deg); }

/* ---------- Drop-up menu (opens above the footer) ---------- */
.sm-user-menu{
  position:absolute; left:12px; bottom:calc(12px + 56px); /* 12 gap + footer */
  min-width:200px;
  background:var(--surface);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:var(--shadow);
  padding:6px;
  z-index:1020;
  animation:smPop .12s ease-out;
}
@keyframes smPop{
  from{ transform:translateY(6px) scale(.98); opacity:0; }
  to  { transform:translateY(0)   scale(1);   opacity:1; }
}
/* little arrow pointing to the footer */
.sm-user-menu::after{
  content:"";
  position:absolute; left:18px; bottom:-6px;
  width:12px; height:12px;
  background:var(--surface);
  border-left:1px solid var(--border);
  border-bottom:1px solid var(--border);
  transform:rotate(45deg);
}

/* Row with label on left + toggle on right */
.sm-menu-row{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:8px 10px; border-radius:8px;
}
.sm-menu-row:hover{ background:var(--surface-2); }
.sm-menu-label{ font-size:.94rem; color:var(--text); }

/* Divider */
.sm-divider{
  height:1px; background:var(--border); margin:6px 4px; border-radius:1px;
}

/* Menu button */
.sm-menu-item{
  width:100%; text-align:left;
  padding:10px 10px; border:none; background:transparent;
  border-radius:8px; cursor:pointer; font-size:.96rem; color:var(--text);
  transition:background .12s ease, color .12s ease;
}
.sm-menu-item:hover{ background:var(--surface-2); }

/* Destructive (logout) – works even without extra class */
.sm-user-menu .sm-menu-item:last-child,
.sm-menu-item.logout{
  color:#dc2626;
}
.sm-user-menu .sm-menu-item:last-child:hover,
.sm-menu-item.logout:hover{
  background:rgba(220,38,38,.08);
}

/* ---------- Optional “peek” avatar when the drawer is closed ---------- */
:root{
  --sm-peek-left:14px; --sm-peek-bottom:12px;
}
.sm-avatar-peek{
  position:fixed; left:var(--sm-peek-left); bottom:var(--sm-peek-bottom);
  background:transparent; border:0; padding:0; margin:0;
  cursor:pointer; z-index:1000;
}
.sm-avatar-peek-bubble{
  width:32px; height:32px; border-radius:999px;
  display:grid; place-items:center; font-weight:700;
  background:rgba(148,163,184,.18); color:var(--text);
  user-select:none;
}
@supports(padding:max(0px)){
  .sm-avatar-peek{ bottom:calc(var(--sm-peek-bottom) + env(safe-area-inset-bottom)); }
}
